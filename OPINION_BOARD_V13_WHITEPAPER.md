# ì˜ê²¬ ë³´ë“œ ì‹œìŠ¤í…œ v1.3 ê°œë°œ ë°±ì„œ
## í•œêµ­ ì œì¡°ì—… ì œí’ˆ ì§„ì²™ë¥  ê´€ë¦¬ ì‹œìŠ¤í…œ (Supabase ë²„ì „)

---

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
4. [í˜ì´ì§€ êµ¬ì¡° ë° ë¼ìš°íŒ…](#í˜ì´ì§€-êµ¬ì¡°-ë°-ë¼ìš°íŒ…)
5. [UI/UX ì»´í¬ë„ŒíŠ¸ ì‹œìŠ¤í…œ](#uiux-ì»´í¬ë„ŒíŠ¸-ì‹œìŠ¤í…œ)
6. [ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§](#ë¹„ì¦ˆë‹ˆìŠ¤-ë¡œì§)
7. [ì¸ì¦ ë° ê¶Œí•œ ì‹œìŠ¤í…œ](#ì¸ì¦-ë°-ê¶Œí•œ-ì‹œìŠ¤í…œ)
8. [ì‹¤ì‹œê°„ ê¸°ëŠ¥](#ì‹¤ì‹œê°„-ê¸°ëŠ¥)
9. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
10. [ê°œë°œ ê°€ì´ë“œë¼ì¸](#ê°œë°œ-ê°€ì´ë“œë¼ì¸)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

### ì‹œìŠ¤í…œ ëª©ì 
í•œêµ­ ì œì¡°ì—… íŠ¹í™”ëœ **3ë‹¨ê³„ ì œí’ˆ ê°œë°œ ì§„ì²™ë¥  ê´€ë¦¬ ì‹œìŠ¤í…œ**ìœ¼ë¡œ, ì¿ ì¿  ê³ ê°ë§Œì¡±íŒ€ì˜ ì‹¤ì œ ì—…ë¬´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë””ì§€í„¸í™”í•œ Notion ìŠ¤íƒ€ì¼ ê´€ë¦¬ ë„êµ¬ì…ë‹ˆë‹¤.

### í•µì‹¬ íŠ¹ì§•
- **í•œêµ­ì–´ UI**: ëª¨ë“  ì¸í„°í˜ì´ìŠ¤ê°€ í•œêµ­ì–´ë¡œ êµ¬ì„±
- **ì œì¡°ì—… í”„ë¡œì„¸ìŠ¤**: ì‹¤ì œ ì œì¡°ì—… ì›Œí¬í”Œë¡œìš° ë°˜ì˜
- **3ë‹¨ê³„ ê´€ë¦¬**: ê¸°ë³¸ì •ë³´ â†’ ìƒì‚°ì¤€ë¹„ â†’ ì–‘ì‚°ì¤€ë¹„
- **ì‹¤ì‹œê°„ í˜‘ì—…**: ë‹¤ì¤‘ ì‚¬ìš©ì ë™ì‹œ í¸ì§‘ ì§€ì›
- **ì§„í–‰ë¥  ì¶”ì **: ë‹¨ê³„ë³„ ìë™ ì§„í–‰ë¥  ê³„ì‚°
- **ì˜ê²¬ ì‹œìŠ¤í…œ**: í”„ë¡œì íŠ¸ë³„ í† ë¡  ë° í”¼ë“œë°±

### ì£¼ìš” ì‚¬ìš©ì
- **ì œí’ˆ ê°œë°œíŒ€**: í”„ë¡œì íŠ¸ ìƒì„± ë° ê´€ë¦¬
- **ìƒì‚°íŒ€**: ìƒì‚° ì¤€ë¹„ ê³¼ì • ê´€ë¦¬
- **í’ˆì§ˆíŒ€**: í’ˆì§ˆ ê²€ì¦ ë° í”¼ë“œë°±
- **ê´€ë¦¬ì**: ì „ì²´ ì‹œìŠ¤í…œ ê´€ë¦¬ ë° ëª¨ë‹ˆí„°ë§

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ê¸°ìˆ  ì•„í‚¤í…ì²˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (React 18)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Pages          Components         Hooks          Utils     â”‚
â”‚  â”œâ”€ Auth        â”œâ”€ UI              â”œâ”€ Auth        â”œâ”€ API    â”‚
â”‚  â”œâ”€ Projects    â”œâ”€ Forms           â”œâ”€ Data        â”œâ”€ Utils  â”‚
â”‚  â”œâ”€ Admin       â”œâ”€ Layout          â”œâ”€ Realtime    â””â”€ Types  â”‚
â”‚  â””â”€ Dashboard   â””â”€ Charts          â””â”€ Validation           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   State Management                         â”‚
â”‚  â”œâ”€ React Query (ì„œë²„ ìƒíƒœ)                               â”‚
â”‚  â”œâ”€ Zustand (í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ)                             â”‚
â”‚  â””â”€ React Context (í…Œë§ˆ, ì„¤ì •)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    API Layer                               â”‚
â”‚  â”œâ”€ Supabase Client                                       â”‚
â”‚  â”œâ”€ Auth API                                              â”‚
â”‚  â”œâ”€ Database API                                          â”‚
â”‚  â””â”€ Realtime API                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                Backend (Supabase)                          â”‚
â”‚  â”œâ”€ PostgreSQL Database                                   â”‚
â”‚  â”œâ”€ Row Level Security (RLS)                              â”‚
â”‚  â”œâ”€ Realtime Subscriptions                               â”‚
â”‚  â”œâ”€ Auth (with JWT)                                       â”‚
â”‚  â””â”€ Storage (íŒŒì¼ ì—…ë¡œë“œ)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° í”Œë¡œìš°
```
User Action â†’ React Component â†’ Custom Hook â†’ Supabase API â†’ PostgreSQL
     â†‘                                                           â†“
UI Update â† State Update â† React Query â† Response â† Database Result
```

---

## ğŸ—ƒï¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### ERD (Entity Relationship Diagram)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     users       â”‚    â”‚    profiles     â”‚    â”‚   projects      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (uuid) PK    â”‚â†â”€â”€â†’â”‚ id (uuid) PK    â”‚    â”‚ id (uuid) PK    â”‚
â”‚ email           â”‚    â”‚ user_id (uuid)FKâ”‚    â”‚ name            â”‚
â”‚ created_at      â”‚    â”‚ name            â”‚    â”‚ model_name      â”‚
â”‚ updated_at      â”‚    â”‚ team            â”‚    â”‚ description     â”‚
â”‚ email_confirmed â”‚    â”‚ role            â”‚    â”‚ status          â”‚
â”‚ phone           â”‚    â”‚ department      â”‚    â”‚ created_by (FK) â”‚
â”‚ last_sign_in    â”‚    â”‚ avatar_url      â”‚    â”‚ created_at      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ created_at      â”‚    â”‚ updated_at      â”‚
                       â”‚ updated_at      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
                                                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ project_stages  â”‚    â”‚    opinions     â”‚    â”‚ activity_logs   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (uuid) PK    â”‚    â”‚ id (uuid) PK    â”‚    â”‚ id (uuid) PK    â”‚
â”‚ project_id (FK) â”‚â†â”€â”€â†’â”‚ project_id (FK) â”‚    â”‚ user_id (FK)    â”‚
â”‚ stage_number    â”‚    â”‚ stage_id (FK)   â”‚    â”‚ project_id (FK) â”‚
â”‚ stage_data      â”‚    â”‚ author_id (FK)  â”‚    â”‚ action          â”‚
â”‚ progress        â”‚    â”‚ title           â”‚    â”‚ details         â”‚
â”‚ created_at      â”‚    â”‚ content         â”‚    â”‚ timestamp       â”‚
â”‚ updated_at      â”‚    â”‚ category        â”‚    â”‚ ip_address      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ priority        â”‚    â”‚ user_agent      â”‚
                       â”‚ tags            â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ status          â”‚
                       â”‚ created_at      â”‚
                       â”‚ updated_at      â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” í…Œì´ë¸” ì •ì˜

#### 1. users (Supabase Auth í…Œì´ë¸” í™•ì¥)
```sql
-- Supabase Auth ê¸°ë³¸ í…Œì´ë¸” í™œìš©
-- ì¶”ê°€ í•„ë“œëŠ” profiles í…Œì´ë¸”ì—ì„œ ê´€ë¦¬
```

#### 2. profiles (ì‚¬ìš©ì í”„ë¡œí•„)
```sql
CREATE TABLE profiles (
  id UUID REFERENCES auth.users(id) PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  team VARCHAR(100),
  role VARCHAR(20) DEFAULT 'user' CHECK (role IN ('user', 'admin', 'manager')),
  department VARCHAR(100),
  phone VARCHAR(20),
  avatar_url TEXT,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### 3. projects (í”„ë¡œì íŠ¸)
```sql
CREATE TABLE projects (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  name VARCHAR(200) NOT NULL,
  model_name VARCHAR(100) UNIQUE NOT NULL,
  description TEXT,
  status VARCHAR(20) DEFAULT 'active' CHECK (status IN ('active', 'completed', 'on_hold', 'cancelled')),
  created_by UUID REFERENCES auth.users(id) NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  completed_at TIMESTAMP WITH TIME ZONE,
  -- ë©”íƒ€ë°ì´í„°
  tags TEXT[],
  priority VARCHAR(20) DEFAULT 'medium' CHECK (priority IN ('low', 'medium', 'high', 'urgent'))
);
```

#### 4. project_stages (í”„ë¡œì íŠ¸ ë‹¨ê³„ ë°ì´í„°)
```sql
CREATE TABLE project_stages (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  project_id UUID REFERENCES projects(id) ON DELETE CASCADE NOT NULL,
  stage_number INTEGER NOT NULL CHECK (stage_number IN (1, 2, 3)),
  stage_data JSONB NOT NULL DEFAULT '{}',
  progress INTEGER DEFAULT 0 CHECK (progress >= 0 AND progress <= 100),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(project_id, stage_number)
);
```

#### 5. opinions (ì˜ê²¬/ëŒ“ê¸€)
```sql
CREATE TABLE opinions (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  project_id UUID REFERENCES projects(id) ON DELETE CASCADE NOT NULL,
  stage_id UUID REFERENCES project_stages(id) ON DELETE CASCADE,
  parent_id UUID REFERENCES opinions(id) ON DELETE CASCADE, -- ë‹µê¸€ìš©
  author_id UUID REFERENCES auth.users(id) NOT NULL,
  title VARCHAR(200),
  content TEXT NOT NULL,
  category VARCHAR(50) DEFAULT 'general',
  priority VARCHAR(20) DEFAULT 'medium' CHECK (priority IN ('low', 'medium', 'high', 'urgent')),
  tags TEXT[],
  status VARCHAR(20) DEFAULT 'open' CHECK (status IN ('open', 'in_review', 'resolved', 'closed')),
  is_private BOOLEAN DEFAULT false,
  notify_on_reply BOOLEAN DEFAULT true,
  upvotes INTEGER DEFAULT 0,
  downvotes INTEGER DEFAULT 0,
  views INTEGER DEFAULT 0,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### 6. activity_logs (í™œë™ ë¡œê·¸)
```sql
CREATE TABLE activity_logs (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id),
  project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
  action VARCHAR(50) NOT NULL,
  details JSONB,
  timestamp TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  ip_address INET,
  user_agent TEXT
);
```

#### 7. opinion_reactions (ì˜ê²¬ ë°˜ì‘)
```sql
CREATE TABLE opinion_reactions (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  opinion_id UUID REFERENCES opinions(id) ON DELETE CASCADE NOT NULL,
  user_id UUID REFERENCES auth.users(id) NOT NULL,
  reaction_type VARCHAR(20) NOT NULL CHECK (reaction_type IN ('upvote', 'downvote')),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(opinion_id, user_id)
);
```

#### 8. project_collaborators (í”„ë¡œì íŠ¸ í˜‘ì—…ì)
```sql
CREATE TABLE project_collaborators (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  project_id UUID REFERENCES projects(id) ON DELETE CASCADE NOT NULL,
  user_id UUID REFERENCES auth.users(id) NOT NULL,
  role VARCHAR(20) DEFAULT 'viewer' CHECK (role IN ('owner', 'editor', 'viewer')),
  permissions JSONB DEFAULT '{}',
  added_by UUID REFERENCES auth.users(id),
  added_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(project_id, user_id)
);
```

### ìŠ¤í‚¤ë§ˆ ì„¸ë¶€ì‚¬í•­

#### Stage Data Structure (JSONB)
ê° ë‹¨ê³„ë³„ ë°ì´í„°ëŠ” JSONB í˜•íƒœë¡œ ì €ì¥:

**Stage 1 (ê¸°ë³¸ì •ë³´)**
```json
{
  "productGroup": "ì •ìˆ˜ê¸°ì‹œë¦¬ì¦ˆ",
  "manufacturer": "LGì „ì",
  "vendor": "ì‚¼ì„±ì „ì",
  "derivativeModel": "WT-PRO-V2",
  "launchDate": "2024-12-01",
  "launchDateExecuted": false,
  "productManager": "ê¹€ìƒí’ˆ",
  "mechanicalEngineer": "ê¹€ê¸°êµ¬",
  "circuitEngineer": "ì´íšŒë¡œ",
  "massProductionDate": "2024-11-15",
  "massProductionDateExecuted": false,
  "notes": "íŠ¹ë³„ ìš”êµ¬ì‚¬í•­"
}
```

**Stage 2 (ìƒì‚°ì¤€ë¹„)**
```json
{
  "pilotProductionDate": "2024-10-01",
  "pilotProductionDateExecuted": true,
  "techTransferDate": "2024-10-10",
  "techTransferDateExecuted": false,
  "installationParty": "ê¸°ìˆ íŒ€",
  "serviceParty": "A/SíŒ€",
  "trainingDate": "2024-10-15",
  "trainingDateExecuted": false,
  "userManualUpload": "íŒŒì¼ëª….pdf",
  "techManualUpload": "ê¸°ìˆ ë§¤ë‰´ì–¼.pdf",
  "userManualUploaded": true,
  "techManualUploaded": false,
  "notes": "ì¶”ê°€ ë©”ëª¨"
}
```

**Stage 3 (ì–‘ì‚°ì¤€ë¹„)**
```json
{
  "firstPartsOrderDate": "2024-11-10",
  "firstPartsOrderDateExecuted": false,
  "bomManager": "ë°•ë¶€í’ˆ",
  "bomCompletionDate": "2024-10-25",
  "bomCompletionDateExecuted": false,
  "priceManager": "ì •ë‹¨ê°€",
  "priceRegistrationDate": "2024-10-30",
  "priceRegistrationDateExecuted": false,
  "partsReceiptDate": "2024-11-05",
  "partsReceiptDateExecuted": false,
  "partsReceiptManager": "ìµœì…ê³ ",
  "branchOrderGuideDate": "2024-11-12",
  "branchOrderGuideDateExecuted": false,
  "notes": "ì–‘ì‚° ê´€ë ¨ ë©”ëª¨"
}
```

---

## ğŸ” Row Level Security (RLS) ì •ì±…

### ê¸°ë³¸ ë³´ì•ˆ ì›ì¹™
- **í”„ë¡œì íŠ¸ ì ‘ê·¼**: í”„ë¡œì íŠ¸ ìƒì„±ì, í˜‘ì—…ì, ê´€ë¦¬ìë§Œ ì ‘ê·¼ ê°€ëŠ¥
- **ì˜ê²¬ ë³´ì•ˆ**: ë¹„ê³µê°œ ì˜ê²¬ì€ ì‘ì„±ìì™€ ê´€ë¦¬ìë§Œ ì¡°íšŒ ê°€ëŠ¥
- **í”„ë¡œí•„ ë³´ì•ˆ**: ìì‹ ì˜ í”„ë¡œí•„ë§Œ ìˆ˜ì • ê°€ëŠ¥
- **í™œë™ ë¡œê·¸**: ê´€ë¦¬ìë§Œ ì¡°íšŒ ê°€ëŠ¥

### RLS ì •ì±… ì˜ˆì‹œ

#### profiles í…Œì´ë¸”
```sql
-- ëª¨ë“  ì‚¬ìš©ìëŠ” ìŠ¹ì¸ëœ í”„ë¡œí•„ ì¡°íšŒ ê°€ëŠ¥
CREATE POLICY "Anyone can view active profiles"
ON profiles FOR SELECT
USING (is_active = true);

-- ìì‹ ì˜ í”„ë¡œí•„ë§Œ ìˆ˜ì • ê°€ëŠ¥
CREATE POLICY "Users can update own profile"
ON profiles FOR UPDATE
USING (auth.uid() = id);

-- ê´€ë¦¬ìëŠ” ëª¨ë“  í”„ë¡œí•„ ê´€ë¦¬ ê°€ëŠ¥
CREATE POLICY "Admins can manage all profiles"
ON profiles FOR ALL
USING (
  EXISTS (
    SELECT 1 FROM profiles
    WHERE id = auth.uid() AND role = 'admin'
  )
);
```

#### projects í…Œì´ë¸”
```sql
-- í™œì„± í”„ë¡œì íŠ¸ ì¡°íšŒ (í˜‘ì—…ìì´ê±°ë‚˜ ê´€ë¦¬ì)
CREATE POLICY "View accessible projects"
ON projects FOR SELECT
USING (
  created_by = auth.uid() OR
  EXISTS (
    SELECT 1 FROM project_collaborators
    WHERE project_id = projects.id AND user_id = auth.uid()
  ) OR
  EXISTS (
    SELECT 1 FROM profiles
    WHERE id = auth.uid() AND role IN ('admin', 'manager')
  )
);

-- í”„ë¡œì íŠ¸ ìƒì„± (ì¸ì¦ëœ ì‚¬ìš©ì)
CREATE POLICY "Authenticated users can create projects"
ON projects FOR INSERT
WITH CHECK (auth.uid() = created_by);

-- í”„ë¡œì íŠ¸ ìˆ˜ì • (ì†Œìœ ì, í¸ì§‘ì, ê´€ë¦¬ì)
CREATE POLICY "Authorized users can update projects"
ON projects FOR UPDATE
USING (
  created_by = auth.uid() OR
  EXISTS (
    SELECT 1 FROM project_collaborators
    WHERE project_id = projects.id 
    AND user_id = auth.uid() 
    AND role IN ('owner', 'editor')
  ) OR
  EXISTS (
    SELECT 1 FROM profiles
    WHERE id = auth.uid() AND role = 'admin'
  )
);
```

#### opinions í…Œì´ë¸”
```sql
-- ì˜ê²¬ ì¡°íšŒ (ê³µê°œ ì˜ê²¬ì´ê±°ë‚˜ ì‘ì„±ìì´ê±°ë‚˜ ê´€ë¦¬ì)
CREATE POLICY "View accessible opinions"
ON opinions FOR SELECT
USING (
  is_private = false OR
  author_id = auth.uid() OR
  EXISTS (
    SELECT 1 FROM profiles
    WHERE id = auth.uid() AND role IN ('admin', 'manager')
  )
);

-- ì˜ê²¬ ì‘ì„± (í”„ë¡œì íŠ¸ ì ‘ê·¼ ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ì)
CREATE POLICY "Authorized users can create opinions"
ON opinions FOR INSERT
WITH CHECK (
  auth.uid() = author_id AND
  EXISTS (
    SELECT 1 FROM projects
    WHERE id = project_id AND (
      created_by = auth.uid() OR
      EXISTS (
        SELECT 1 FROM project_collaborators
        WHERE project_id = projects.id AND user_id = auth.uid()
      ) OR
      EXISTS (
        SELECT 1 FROM profiles
        WHERE id = auth.uid() AND role IN ('admin', 'manager')
      )
    )
  )
);
```

---

## ğŸ§­ í˜ì´ì§€ êµ¬ì¡° ë° ë¼ìš°íŒ…

### ë¼ìš°íŒ… ì‹œìŠ¤í…œ
React Router v6ë¥¼ ì‚¬ìš©í•œ ì„ ì–¸ì  ë¼ìš°íŒ…:

```
/                           â†’ í™ˆ/ëŒ€ì‹œë³´ë“œ (ì¸ì¦ í›„ ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸)
/auth
  /login                    â†’ ë¡œê·¸ì¸
  /register                 â†’ íšŒì›ê°€ì…
  /forgot-password          â†’ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •

/dashboard                  â†’ ë©”ì¸ ëŒ€ì‹œë³´ë“œ

/projects                   â†’ í”„ë¡œì íŠ¸ ê´€ë¦¬
  /                         â†’ í”„ë¡œì íŠ¸ ëª©ë¡
  /new                      â†’ ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
  /:id                      â†’ í”„ë¡œì íŠ¸ ìƒì„¸ë³´ê¸°
  /:id/edit                 â†’ í”„ë¡œì íŠ¸ í¸ì§‘
  /:id/stages/:stage        â†’ íŠ¹ì • ë‹¨ê³„ í¸ì§‘
  /completed                â†’ ì™„ë£Œëœ í”„ë¡œì íŠ¸

/calendar                   â†’ ìº˜ë¦°ë” ë·°

/admin                      â†’ ê´€ë¦¬ì (ê´€ë¦¬ìë§Œ ì ‘ê·¼)
  /users                    â†’ ì‚¬ìš©ì ê´€ë¦¬
  /audit                    â†’ í™œë™ ë¡œê·¸
  /security                 â†’ ë³´ì•ˆ ì„¤ì •
  /reports                  â†’ ê³µê°œ ë³´ê³ ì„œ ê´€ë¦¬

/profile                    â†’ í”„ë¡œí•„ ê´€ë¦¬
```

### í˜ì´ì§€ë³„ ìƒì„¸ ëª…ì„¸

#### 1. ë¡œê·¸ì¸ í˜ì´ì§€ (/auth/login)
**ëª©ì **: ì‚¬ìš©ì ì¸ì¦

**UI êµ¬ì„±**:
- ì¿ ì¿  ë¸Œëœë“œ ë¡œê³  ë° íƒ€ì´í‹€
- ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í¼
- "ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€" ì²´í¬ë°•ìŠ¤
- ì†Œì…œ ë¡œê·¸ì¸ ì˜µì…˜ (êµ¬ê¸€, ì¹´ì¹´ì˜¤)
- íšŒì›ê°€ì…, ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° ë§í¬

**ê¸°ëŠ¥**:
- ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬
- ë¡œê·¸ì¸ ì‹¤íŒ¨ íšŸìˆ˜ ì œí•œ
- ìë™ ë¡œê·¸ì¸ (Remember Me)
- ë¡œê·¸ì¸ í›„ ì´ì „ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

**ìƒíƒœ ê´€ë¦¬**:
```javascript
const [loginForm, setLoginForm] = useState({
  email: '',
  password: '',
  rememberMe: false
});
const [errors, setErrors] = useState({});
const [isLoading, setIsLoading] = useState(false);
```

#### 2. íšŒì›ê°€ì… í˜ì´ì§€ (/auth/register)
**ëª©ì **: ì‹ ê·œ ì‚¬ìš©ì ë“±ë¡

**UI êµ¬ì„±**:
- ê°œì¸ì •ë³´ ì…ë ¥ í¼ (ì´ë¦„, ì´ë©”ì¼, ë¶€ì„œ, ì—°ë½ì²˜)
- ë¹„ë°€ë²ˆí˜¸ ì„¤ì • (í™•ì¸ í¬í•¨)
- ì•½ê´€ ë™ì˜ ì²´í¬ë°•ìŠ¤
- íšŒì›ê°€ì… ë²„íŠ¼

**ê¸°ëŠ¥**:
- ì‹¤ì‹œê°„ ìœ íš¨ì„± ê²€ì‚¬
- ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸
- ë¹„ë°€ë²ˆí˜¸ ê°•ë„ í‘œì‹œ
- ì´ë©”ì¼ ì¸ì¦ ë°œì†¡

#### 3. ë©”ì¸ ëŒ€ì‹œë³´ë“œ (/dashboard)
**ëª©ì **: í”„ë¡œì íŠ¸ í˜„í™© í•œëˆˆì— ë³´ê¸°

**UI êµ¬ì„±**:
- **ìƒë‹¨**: ë¸Œëœë“œ í—¤ë” + ë„¤ë¹„ê²Œì´ì…˜
- **ë©”ì¸ ì„¹ì…˜**:
  - í”„ë¡œì íŠ¸ í˜„í™© ìš”ì•½ ì¹´ë“œ
  - ì§„í–‰ë¥  ì°¨íŠ¸ (ë„ë„› ì°¨íŠ¸)
  - ìµœê·¼ í™œë™ íƒ€ì„ë¼ì¸
  - ì„ë°•í•œ ë§ˆê°ì¼ ì•Œë¦¼
- **ì‚¬ì´ë“œë°”**: ë¹ ë¥¸ ì•¡ì…˜ ë©”ë‰´

**ë°ì´í„°**:
- ì „ì²´/ì§„í–‰ì¤‘/ì™„ë£Œ í”„ë¡œì íŠ¸ ìˆ˜
- í‰ê·  ì§„í–‰ë¥ 
- ì§€ì—° í”„ë¡œì íŠ¸ ìˆ˜
- D-Day ì„ë°• í”„ë¡œì íŠ¸

#### 4. í”„ë¡œì íŠ¸ ëª©ë¡ (/projects)
**ëª©ì **: ëª¨ë“  í”„ë¡œì íŠ¸ ê´€ë¦¬

**UI êµ¬ì„±**:
- **í•„í„°ë§ ë°”**: ìƒíƒœë³„, ë‹´ë‹¹ìë³„, ë‚ ì§œë³„ í•„í„°
- **ì •ë ¬ ì˜µì…˜**: ìƒì„±ì¼, ì§„í–‰ë¥ , D-Day ìˆœ
- **ë·° í† ê¸€**: ê·¸ë¦¬ë“œ ë·° / ë¦¬ìŠ¤íŠ¸ ë·°
- **í”„ë¡œì íŠ¸ ì¹´ë“œ**: 
  - ì§„í–‰ë¥  ì‹œê°í™”
  - D-Day í‘œì‹œ
  - ë¹ ë¥¸ ì•¡ì…˜ ë²„íŠ¼

**ê¸°ëŠ¥**:
- ì‹¤ì‹œê°„ ê²€ìƒ‰
- ë¬´í•œ ìŠ¤í¬ë¡¤ í˜ì´ì§€ë„¤ì´ì…˜
- ë²Œí¬ ì•¡ì…˜ (ì¼ê´„ ìƒíƒœ ë³€ê²½)
- ì—‘ì…€ ë‚´ë³´ë‚´ê¸°

#### 5. í”„ë¡œì íŠ¸ ìƒì„¸ (/projects/:id)
**ëª©ì **: í”„ë¡œì íŠ¸ ìƒì„¸ ì •ë³´ í™•ì¸

**UI êµ¬ì„±**:
- **í—¤ë”**: í”„ë¡œì íŠ¸ëª…, ì§„í–‰ë¥ , ì•¡ì…˜ ë²„íŠ¼
- **íƒ­ ë„¤ë¹„ê²Œì´ì…˜**:
  - ê°œìš”: ê¸°ë³¸ ì •ë³´ + ì „ì²´ ì§„í–‰ë¥ 
  - 1ë‹¨ê³„: ê¸°ë³¸ì •ë³´ (ì½ê¸° ì „ìš©)
  - 2ë‹¨ê³„: ìƒì‚°ì¤€ë¹„ (ì½ê¸° ì „ìš©)  
  - 3ë‹¨ê³„: ì–‘ì‚°ì¤€ë¹„ (ì½ê¸° ì „ìš©)
  - ì˜ê²¬: ì˜ê²¬ ëª©ë¡ + ìƒˆ ì˜ê²¬ ì‘ì„±
  - ì´ë ¥: ë³€ê²½ ì´ë ¥ + í™œë™ ë¡œê·¸

**ê¸°ëŠ¥**:
- ë‹¨ê³„ë³„ ì§„í–‰ë¥  ì‹œê°í™”
- ì‹¤ì‹œê°„ ì˜ê²¬ ì‹œìŠ¤í…œ
- íŒŒì¼ ì²¨ë¶€ ë‹¤ìš´ë¡œë“œ
- ê³µê°œ ë³´ê³ ì„œ ìƒì„±

#### 6. í”„ë¡œì íŠ¸ í¸ì§‘ (/projects/:id/edit)
**ëª©ì **: í”„ë¡œì íŠ¸ ë°ì´í„° ìˆ˜ì •

**UI êµ¬ì„±**:
- **ìŠ¤í… ë„¤ë¹„ê²Œì´ì…˜**: 1ë‹¨ê³„ â†’ 2ë‹¨ê³„ â†’ 3ë‹¨ê³„
- **í˜„ì¬ ë‹¨ê³„ í¼**: í•´ë‹¹ ë‹¨ê³„ì˜ ì…ë ¥ í¼
- **ì§„í–‰ë¥  í‘œì‹œ**: ì‹¤ì‹œê°„ ì§„í–‰ë¥  ê³„ì‚°
- **ìë™ì €ì¥ ì•Œë¦¼**: 3ì´ˆë§ˆë‹¤ ìë™ì €ì¥
- **ë³€ê²½ì‚¬í•­ ì¶”ì **: ìˆ˜ì •ëœ í•„ë“œ í•˜ì´ë¼ì´íŠ¸

**ê¸°ëŠ¥**:
- ì‹¤ì‹œê°„ ìœ íš¨ì„± ê²€ì‚¬
- ìë™ì €ì¥ (debounced)
- ë‹¨ê³„ë³„ ì§„í–‰ë¥  ê³„ì‚°
- ë³€ê²½ ì´ë ¥ ê¸°ë¡
- ë™ì‹œí¸ì§‘ ì¶©ëŒ ë°©ì§€

#### 7. ìº˜ë¦°ë” ë·° (/calendar)
**ëª©ì **: í”„ë¡œì íŠ¸ ì¼ì • ì‹œê°í™”

**UI êµ¬ì„±**:
- ì›”ê°„ ìº˜ë¦°ë” ê·¸ë¦¬ë“œ
- ì¼ì • ì¢…ë¥˜ë³„ ìƒ‰ìƒ êµ¬ë¶„
- ë‚ ì§œë³„ ì¼ì • ëª©ë¡
- í•„í„° ì‚¬ì´ë“œë°”

**ê¸°ëŠ¥**:
- ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì¼ì • ì´ë™
- ì¼ì • í´ë¦­ ì‹œ ìƒì„¸ ì •ë³´
- iCal ë‚´ë³´ë‚´ê¸°
- í”„ë¡œì íŠ¸ë³„ í•„í„°ë§

---

## ğŸ¨ UI/UX ì»´í¬ë„ŒíŠ¸ ì‹œìŠ¤í…œ

### ë””ìì¸ ì‹œìŠ¤í…œ

#### ì»¬ëŸ¬ íŒ”ë ˆíŠ¸
```css
:root {
  /* Primary Colors (ì¿ ì¿  ë¸Œëœë“œ) */
  --cuckoo-red: #DC2626;
  --cuckoo-red-50: #FEF2F2;
  --cuckoo-red-100: #FEE2E2;
  --cuckoo-red-600: #DC2626;
  --cuckoo-red-700: #B91C1C;

  /* Stage Colors */
  --stage1-blue: #3B82F6;
  --stage1-blue-50: #EFF6FF;
  --stage2-green: #10B981;
  --stage2-green-50: #ECFDF5;
  --stage3-purple: #8B5CF6;
  --stage3-purple-50: #F5F3FF;

  /* Neutral Colors */
  --gray-50: #F9FAFB;
  --gray-100: #F3F4F6;
  --gray-200: #E5E7EB;
  --gray-300: #D1D5DB;
  --gray-400: #9CA3AF;
  --gray-500: #6B7280;
  --gray-600: #4B5563;
  --gray-700: #374151;
  --gray-800: #1F2937;
  --gray-900: #111827;

  /* Status Colors */
  --success: #10B981;
  --warning: #F59E0B;
  --error: #EF4444;
  --info: #3B82F6;
}
```

#### íƒ€ì´í¬ê·¸ë˜í”¼
```css
/* í°íŠ¸ íŒ¨ë°€ë¦¬ */
--font-primary: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
--font-mono: 'JetBrains Mono', 'Consolas', monospace;

/* í°íŠ¸ í¬ê¸° */
--text-xs: 0.75rem;    /* 12px */
--text-sm: 0.875rem;   /* 14px */
--text-base: 1rem;     /* 16px */
--text-lg: 1.125rem;   /* 18px */
--text-xl: 1.25rem;    /* 20px */
--text-2xl: 1.5rem;    /* 24px */
--text-3xl: 1.875rem;  /* 30px */
```

#### ê°„ê²© ì‹œìŠ¤í…œ
```css
--space-1: 0.25rem;   /* 4px */
--space-2: 0.5rem;    /* 8px */
--space-3: 0.75rem;   /* 12px */
--space-4: 1rem;      /* 16px */
--space-6: 1.5rem;    /* 24px */
--space-8: 2rem;      /* 32px */
--space-12: 3rem;     /* 48px */
--space-16: 4rem;     /* 64px */
```

### í•µì‹¬ ì»´í¬ë„ŒíŠ¸

#### 1. BrandHeader
**ìœ„ì¹˜**: `src/components/layout/BrandHeader.tsx`
**ëª©ì **: ì „ì—­ í—¤ë” ë° ë„¤ë¹„ê²Œì´ì…˜

```typescript
interface BrandHeaderProps {
  showNav?: boolean;
  currentUser?: User;
  onNavigate?: (path: string) => void;
  onLogout?: () => void;
}

const BrandHeader: React.FC<BrandHeaderProps> = ({
  showNav = true,
  currentUser,
  onNavigate,
  onLogout
}) => {
  return (
    <header className="bg-white border-b border-gray-200">
      <div className="max-w-7xl mx-auto px-6 py-4">
        <div className="flex items-center justify-between">
          {/* ì¿ ì¿  ë¸Œëœë“œ ë¡œê³  */}
          <div className="flex items-center space-x-4">
            <div className="w-10 h-10 bg-cuckoo-red rounded-lg flex items-center justify-center">
              <span className="text-white font-bold text-sm">ì¿ ì¿ </span>
            </div>
            <div>
              <h1 className="text-xl font-semibold text-gray-900">ê³ ê°ë§Œì¡±íŒ€</h1>
              <p className="text-sm text-gray-500">ì œí’ˆ ì§„ì²™ë¥  ê´€ë¦¬ ì‹œìŠ¤í…œ</p>
            </div>
          </div>

          {/* ë„¤ë¹„ê²Œì´ì…˜ ë° ì‚¬ìš©ì ë©”ë‰´ */}
          {showNav && currentUser && (
            <nav className="flex items-center space-x-6">
              {/* ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ë“¤ */}
            </nav>
          )}
        </div>
      </div>
    </header>
  );
};
```

#### 2. ProjectCard
**ìœ„ì¹˜**: `src/components/project/ProjectCard.tsx`  
**ëª©ì **: í”„ë¡œì íŠ¸ ì •ë³´ ì¹´ë“œ í‘œì‹œ

```typescript
interface ProjectCardProps {
  project: Project;
  mode?: 'grid' | 'list' | 'compact';
  showActions?: boolean;
  onView?: (project: Project) => void;
  onEdit?: (project: Project) => void;
  onDelete?: (project: Project) => void;
}

const ProjectCard: React.FC<ProjectCardProps> = ({
  project,
  mode = 'grid',
  showActions = false,
  onView,
  onEdit,
  onDelete
}) => {
  const progress = calculateProjectProgress(project);
  const dDay = calculateDDay(project.stage1.massProductionDate);

  return (
    <div className={`bg-white rounded-xl border border-gray-200 hover:shadow-lg transition-all ${
      mode === 'grid' ? 'p-6' : 'p-4'
    }`}>
      {/* í—¤ë” */}
      <div className="flex items-start justify-between mb-4">
        <div className="flex-1">
          <h3 className="text-lg font-bold text-gray-900 mb-1">
            {project.name}
          </h3>
          <div className="flex items-center space-x-2 text-sm text-gray-600">
            <span className="px-2 py-1 bg-gray-100 rounded">{project.modelName}</span>
            {project.stage1.manufacturer && (
              <span>{project.stage1.manufacturer}</span>
            )}
          </div>
        </div>
        {dDay !== null && (
          <DDayBadge dDay={dDay} />
        )}
      </div>

      {/* ì „ì²´ ì§„í–‰ë¥  */}
      <div className="mb-4">
        <div className="flex items-center justify-between mb-2">
          <span className="text-sm font-medium text-gray-700">ì „ì²´ ì§„í–‰ë¥ </span>
          <span className="text-2xl font-bold text-blue-600">
            {progress.overall}%
          </span>
        </div>
        <ProgressBar value={progress.overall} />
      </div>

      {/* ë‹¨ê³„ë³„ ë¯¸ë‹ˆ ì§„í–‰ë¥  */}
      <div className="space-y-2 mb-4">
        <MiniProgressBar label="1ë‹¨ê³„" value={progress.stage1} />
        <MiniProgressBar label="2ë‹¨ê³„" value={progress.stage2} />
        <MiniProgressBar label="3ë‹¨ê³„" value={progress.stage3} />
      </div>

      {/* ì•¡ì…˜ ë²„íŠ¼ë“¤ */}
      {showActions && (
        <div className="flex space-x-2 pt-2 border-t">
          <Button onClick={() => onView?.(project)} variant="outline" size="sm">
            ë³´ê¸°
          </Button>
          <Button onClick={() => onEdit?.(project)} variant="outline" size="sm">
            í¸ì§‘
          </Button>
          {onDelete && (
            <Button 
              onClick={() => onDelete(project)} 
              variant="outline" 
              size="sm"
              className="text-red-600 border-red-200 hover:bg-red-50"
            >
              ì‚­ì œ
            </Button>
          )}
        </div>
      )}
    </div>
  );
};
```

#### 3. StageForm
**ìœ„ì¹˜**: `src/components/project/StageForm.tsx`
**ëª©ì **: ë‹¨ê³„ë³„ ë°ì´í„° ì…ë ¥ í¼

```typescript
interface StageFormProps {
  project: Project;
  stage: 1 | 2 | 3;
  mode?: 'edit' | 'view';
  onUpdate?: (stageData: StageData) => void;
  onSave?: () => void;
}

const StageForm: React.FC<StageFormProps> = ({
  project,
  stage,
  mode = 'edit',
  onUpdate,
  onSave
}) => {
  const stageData = project[`stage${stage}`];
  const progress = getStageProgress(project, `stage${stage}`);

  return (
    <div className="bg-white rounded-lg border p-6">
      {/* í—¤ë” */}
      <div className="flex items-center justify-between mb-6">
        <div className="flex items-center">
          <div className={`w-3 h-3 rounded-full mr-3 ${getStageColor(stage)}`} />
          <h3 className={`text-xl font-semibold ${getStageTextColor(stage)}`}>
            {getStageTitle(stage)}
          </h3>
        </div>
        <div className="flex items-center space-x-4">
          <span className="text-sm text-gray-600">
            ì§„í–‰ë¥ : <span className="font-medium">{progress}%</span>
          </span>
          <ProgressBar value={progress} className="w-24" />
        </div>
      </div>

      {/* í¼ í•„ë“œë“¤ */}
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        {getStageFields(stage).map(field => (
          <FormField
            key={field.key}
            field={field}
            value={stageData[field.key]}
            onChange={(value) => handleFieldChange(field.key, value)}
            disabled={mode === 'view'}
          />
        ))}
      </div>

      {/* ë¹„ê³  ì˜ì—­ */}
      <div className="mt-6 pt-6 border-t">
        <label className="block text-sm font-medium text-gray-700 mb-2">
          ë¹„ê³  (ê³µìš© ë©”ëª¨)
        </label>
        <textarea
          value={stageData.notes || ''}
          onChange={(e) => handleFieldChange('notes', e.target.value)}
          rows={6}
          className="w-full px-4 py-3 border border-gray-300 rounded-md"
          disabled={mode === 'view'}
          placeholder="í”„ë¡œì íŠ¸ ê´€ë ¨ ì¤‘ìš” ì‚¬í•­, ë³€ê²½ ë‚´ìš©, íŠ¹ì´ì‚¬í•­ ë“±ì„ ì‘ì„±í•´ì£¼ì„¸ìš”..."
        />
      </div>
    </div>
  );
};
```

#### 4. OpinionSystem
**ìœ„ì¹˜**: `src/components/opinion/OpinionSystem.tsx`
**ëª©ì **: ì˜ê²¬ ì‘ì„± ë° ê´€ë¦¬ ì‹œìŠ¤í…œ

```typescript
interface OpinionSystemProps {
  projectId: string;
  stageId?: string;
  currentUser: User;
}

const OpinionSystem: React.FC<OpinionSystemProps> = ({
  projectId,
  stageId,
  currentUser
}) => {
  const [opinions, setOpinions] = useState<Opinion[]>([]);
  const [showForm, setShowForm] = useState(false);
  const [filter, setFilter] = useState<OpinionFilter>('all');

  return (
    <div className="space-y-6">
      {/* ì˜ê²¬ í†µê³„ */}
      <div className="grid grid-cols-4 gap-4">
        <StatCard title="ì „ì²´ ì˜ê²¬" value={opinions.length} />
        <StatCard title="ë¯¸í•´ê²°" value={getOpenOpinionsCount(opinions)} />
        <StatCard title="ê²€í† ì¤‘" value={getInReviewCount(opinions)} />
        <StatCard title="í•´ê²°ë¨" value={getResolvedCount(opinions)} />
      </div>

      {/* í•„í„° ë° ì•¡ì…˜ */}
      <div className="flex items-center justify-between">
        <OpinionFilter current={filter} onChange={setFilter} />
        <Button onClick={() => setShowForm(true)}>
          âœï¸ ì˜ê²¬ ì‘ì„±
        </Button>
      </div>

      {/* ì˜ê²¬ ëª©ë¡ */}
      <div className="space-y-4">
        {filteredOpinions.map(opinion => (
          <OpinionCard
            key={opinion.id}
            opinion={opinion}
            currentUser={currentUser}
            onReply={(opinionId) => handleReply(opinionId)}
            onResolve={(opinionId) => handleResolve(opinionId)}
          />
        ))}
      </div>

      {/* ì˜ê²¬ ì‘ì„± í¼ ëª¨ë‹¬ */}
      {showForm && (
        <OpinionFormModal
          projectId={projectId}
          stageId={stageId}
          currentUser={currentUser}
          onClose={() => setShowForm(false)}
          onSubmit={handleOpinionSubmit}
        />
      )}
    </div>
  );
};
```

### ê³µí†µ ì»´í¬ë„ŒíŠ¸

#### Button
```typescript
interface ButtonProps {
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';
  size?: 'sm' | 'md' | 'lg';
  disabled?: boolean;
  loading?: boolean;
  children: React.ReactNode;
  onClick?: () => void;
}
```

#### Input
```typescript
interface InputProps {
  label?: string;
  type?: 'text' | 'email' | 'password' | 'date' | 'number';
  placeholder?: string;
  value: string;
  onChange: (value: string) => void;
  error?: string;
  required?: boolean;
  disabled?: boolean;
}
```

#### Modal
```typescript
interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title?: string;
  size?: 'sm' | 'md' | 'lg' | 'xl';
  children: React.ReactNode;
}
```

#### ProgressBar
```typescript
interface ProgressBarProps {
  value: number; // 0-100
  showLabel?: boolean;
  color?: 'blue' | 'green' | 'purple' | 'gray';
  size?: 'sm' | 'md' | 'lg';
}
```

---

## ğŸ”§ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

### ì§„í–‰ë¥  ê³„ì‚° ì‹œìŠ¤í…œ

#### ì „ì²´ ì§„í–‰ë¥  ê³„ì‚°
```typescript
export const calculateProjectProgress = (project: Project): ProjectProgress => {
  const stage1Progress = calculateStageProgress(project.stage1, 1);
  const stage2Progress = calculateStageProgress(project.stage2, 2);
  const stage3Progress = calculateStageProgress(project.stage3, 3);
  
  const overall = Math.round((stage1Progress + stage2Progress + stage3Progress) / 3);
  
  return {
    overall,
    stage1: stage1Progress,
    stage2: stage2Progress,
    stage3: stage3Progress
  };
};
```

#### ë‹¨ê³„ë³„ ì§„í–‰ë¥  ê³„ì‚°
ê° ë‹¨ê³„ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë¹„ì¤‘ìœ¼ë¡œ ê³„ì‚°:
- **ë‚ ì§œ í•„ë“œ**: ì…ë ¥ ì™„ë£Œ ì‹œ 0.5ì , ì‹¤í–‰ ì™„ë£Œ ì‹œ 0.5ì  (ì´ 1.0ì )
- **í…ìŠ¤íŠ¸ í•„ë“œ**: ì…ë ¥ ì™„ë£Œ ì‹œ 1.0ì 
- **ì²´í¬ë°•ìŠ¤ í•„ë“œ**: ì²´í¬ ì‹œ 1.0ì 

```typescript
export const calculateStageProgress = (stageData: StageData, stageNumber: number): number => {
  const fields = getStageFieldDefinitions(stageNumber);
  let totalScore = 0;
  let achievedScore = 0;

  fields.forEach(field => {
    if (field.type === 'date') {
      totalScore += 1.0; // ë‚ ì§œ(0.5) + ì‹¤í–‰ì™„ë£Œ(0.5)
      
      if (stageData[field.key] && stageData[field.key].trim() !== '') {
        achievedScore += 0.5;
      }
      
      if (stageData[`${field.key}Executed`] === true) {
        achievedScore += 0.5;
      }
    } else if (field.type === 'checkbox') {
      totalScore += 1.0;
      if (stageData[field.key] === true) {
        achievedScore += 1.0;
      }
    } else {
      totalScore += 1.0;
      if (stageData[field.key] && stageData[field.key].trim() !== '') {
        achievedScore += 1.0;
      }
    }
  });

  return totalScore > 0 ? Math.round((achievedScore / totalScore) * 100) : 0;
};
```

### D-Day ê³„ì‚°

```typescript
export const calculateDDay = (massProductionDate: string | null): number | null => {
  if (!massProductionDate) return null;
  
  const targetDate = new Date(massProductionDate);
  const today = new Date();
  const diffTime = targetDate.getTime() - today.getTime();
  
  return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
};

export const getDDayStatus = (dDay: number | null): DDayStatus => {
  if (dDay === null) return { type: 'none', text: '', color: 'gray' };
  
  if (dDay < 0) {
    return {
      type: 'overdue',
      text: `D+${Math.abs(dDay)}`,
      color: 'red',
      emoji: 'ğŸš¨'
    };
  } else if (dDay === 0) {
    return {
      type: 'today',
      text: 'D-DAY',
      color: 'orange',
      emoji: 'âš¡'
    };
  } else if (dDay <= 7) {
    return {
      type: 'urgent',
      text: `D-${dDay}`,
      color: 'yellow',
      emoji: 'âš ï¸'
    };
  } else if (dDay <= 30) {
    return {
      type: 'soon',
      text: `D-${dDay}`,
      color: 'blue',
      emoji: 'ğŸ“…'
    };
  } else {
    return {
      type: 'normal',
      text: `D-${dDay}`,
      color: 'gray',
      emoji: 'ğŸ“'
    };
  }
};
```

### ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬

#### í”„ë¡œì íŠ¸ ìœ íš¨ì„± ê²€ì‚¬
```typescript
export const validateProject = (project: Partial<Project>): ValidationResult => {
  const errors: ValidationErrors = {};

  // ê¸°ë³¸ ì •ë³´ ê²€ì‚¬
  if (!project.name || project.name.trim().length < 3) {
    errors.name = 'í”„ë¡œì íŠ¸ëª…ì€ 3ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”';
  }

  if (!project.modelName || project.modelName.trim().length < 2) {
    errors.modelName = 'ëª¨ë¸ëª…ì€ 2ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”';
  }

  // ë‚ ì§œ ê²€ì‚¬
  if (project.stage1) {
    const { launchDate, massProductionDate } = project.stage1;
    
    if (launchDate && massProductionDate) {
      const launch = new Date(launchDate);
      const mass = new Date(massProductionDate);
      
      if (launch >= mass) {
        errors['stage1.launchDate'] = 'ì¶œì‹œ ì˜ˆì •ì¼ì€ ì–‘ì‚° ì˜ˆì •ì¼ë³´ë‹¤ ë¹¨ë¼ì•¼ í•©ë‹ˆë‹¤';
      }
    }
  }

  return {
    isValid: Object.keys(errors).length === 0,
    errors
  };
};
```

#### ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™”

```typescript
export const useRealtimeProject = (projectId: string) => {
  const [project, setProject] = useState<Project | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const subscription = supabase
      .channel(`project:${projectId}`)
      .on('postgres_changes', 
        { 
          event: '*', 
          schema: 'public', 
          table: 'projects',
          filter: `id=eq.${projectId}`
        },
        (payload) => {
          console.log('Project updated:', payload);
          handleProjectUpdate(payload);
        }
      )
      .subscribe();

    return () => {
      subscription.unsubscribe();
    };
  }, [projectId]);

  const handleProjectUpdate = useCallback((payload: any) => {
    switch (payload.eventType) {
      case 'UPDATE':
        setProject(payload.new);
        break;
      case 'DELETE':
        setProject(null);
        break;
    }
  }, []);

  return { project, loading, error };
};
```

---

## ğŸ” ì¸ì¦ ë° ê¶Œí•œ ì‹œìŠ¤í…œ

### Supabase Auth í†µí•©

#### ì¸ì¦ ì„¤ì •
```typescript
// src/lib/supabase.ts
import { createClient } from '@supabase/supabase-js';

const supabaseUrl = process.env.REACT_APP_SUPABASE_URL!;
const supabaseAnonKey = process.env.REACT_APP_SUPABASE_ANON_KEY!;

export const supabase = createClient(supabaseUrl, supabaseAnonKey, {
  auth: {
    autoRefreshToken: true,
    persistSession: true,
    detectSessionInUrl: true
  }
});
```

#### ì¸ì¦ í›…
```typescript
// src/hooks/useAuth.ts
export const useAuth = () => {
  const [user, setUser] = useState<User | null>(null);
  const [profile, setProfile] = useState<Profile | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // ì´ˆê¸° ì„¸ì…˜ í™•ì¸
    supabase.auth.getSession().then(({ data: { session } }) => {
      setUser(session?.user ?? null);
      if (session?.user) {
        fetchUserProfile(session.user.id);
      }
      setLoading(false);
    });

    // ì„¸ì…˜ ë³€ê²½ ê°ì§€
    const { data: { subscription } } = supabase.auth.onAuthStateChange(
      async (event, session) => {
        setUser(session?.user ?? null);
        if (session?.user) {
          fetchUserProfile(session.user.id);
        } else {
          setProfile(null);
        }
        setLoading(false);
      }
    );

    return () => subscription.unsubscribe();
  }, []);

  const fetchUserProfile = async (userId: string) => {
    const { data, error } = await supabase
      .from('profiles')
      .select('*')
      .eq('id', userId)
      .single();

    if (data) setProfile(data);
    if (error) console.error('Profile fetch error:', error);
  };

  const signIn = async (email: string, password: string) => {
    const { data, error } = await supabase.auth.signInWithPassword({
      email,
      password
    });
    return { data, error };
  };

  const signUp = async (email: string, password: string, userData: any) => {
    const { data, error } = await supabase.auth.signUp({
      email,
      password,
      options: {
        data: userData
      }
    });
    return { data, error };
  };

  const signOut = async () => {
    const { error } = await supabase.auth.signOut();
    return { error };
  };

  return {
    user,
    profile,
    loading,
    signIn,
    signUp,
    signOut
  };
};
```

### ê¶Œí•œ ì‹œìŠ¤í…œ

#### ê¶Œí•œ ë ˆë²¨
- **user**: ì¼ë°˜ ì‚¬ìš©ì (ê¸°ë³¸)
- **manager**: ê´€ë¦¬ì (íŒ€ ë§¤ë‹ˆì €)
- **admin**: ì‹œìŠ¤í…œ ê´€ë¦¬ì

#### ê¶Œí•œ ì²´í¬ ì»´í¬ë„ŒíŠ¸
```typescript
// src/components/auth/PermissionGuard.tsx
interface PermissionGuardProps {
  requiredRole: 'user' | 'manager' | 'admin';
  children: React.ReactNode;
  fallback?: React.ReactNode;
}

export const PermissionGuard: React.FC<PermissionGuardProps> = ({
  requiredRole,
  children,
  fallback = <div>ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.</div>
}) => {
  const { profile } = useAuth();

  if (!profile) return <div>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</div>;

  const hasPermission = checkPermission(profile.role, requiredRole);
  
  return hasPermission ? <>{children}</> : <>{fallback}</>;
};

const checkPermission = (userRole: string, requiredRole: string): boolean => {
  const roleHierarchy = {
    'user': 1,
    'manager': 2,
    'admin': 3
  };

  return roleHierarchy[userRole] >= roleHierarchy[requiredRole];
};
```

#### í”„ë¡œì íŠ¸ ì ‘ê·¼ ê¶Œí•œ
```typescript
export const useProjectPermissions = (projectId: string) => {
  const { user } = useAuth();
  const [permissions, setPermissions] = useState<ProjectPermissions | null>(null);

  useEffect(() => {
    if (!user || !projectId) return;

    const fetchPermissions = async () => {
      // í”„ë¡œì íŠ¸ ì†Œìœ ìì¸ì§€ í™•ì¸
      const { data: project } = await supabase
        .from('projects')
        .select('created_by')
        .eq('id', projectId)
        .single();

      // í˜‘ì—…ìì¸ì§€ í™•ì¸
      const { data: collaborator } = await supabase
        .from('project_collaborators')
        .select('role, permissions')
        .eq('project_id', projectId)
        .eq('user_id', user.id)
        .single();

      // ê´€ë¦¬ìì¸ì§€ í™•ì¸
      const { data: profile } = await supabase
        .from('profiles')
        .select('role')
        .eq('id', user.id)
        .single();

      const isOwner = project?.created_by === user.id;
      const isAdmin = profile?.role === 'admin';
      const isManager = profile?.role === 'manager';
      const collaboratorRole = collaborator?.role;

      setPermissions({
        canView: isOwner || isAdmin || isManager || !!collaborator,
        canEdit: isOwner || isAdmin || collaboratorRole === 'editor',
        canDelete: isOwner || isAdmin,
        canManageCollaborators: isOwner || isAdmin,
        isOwner,
        isAdmin,
        collaboratorRole
      });
    };

    fetchPermissions();
  }, [user, projectId]);

  return permissions;
};
```

---

## âš¡ ì‹¤ì‹œê°„ ê¸°ëŠ¥

### Supabase Realtime ì„¤ì •

#### ì‹¤ì‹œê°„ í”„ë¡œì íŠ¸ ì—…ë°ì´íŠ¸
```typescript
export const useRealtimeProjects = () => {
  const [projects, setProjects] = useState<Project[]>([]);
  
  useEffect(() => {
    // ì´ˆê¸° ë°ì´í„° ë¡œë“œ
    const fetchProjects = async () => {
      const { data } = await supabase
        .from('projects')
        .select(`
          *,
          profiles:created_by(name, team),
          project_stages(*),
          opinions(count)
        `)
        .order('created_at', { ascending: false });
      
      setProjects(data || []);
    };

    fetchProjects();

    // ì‹¤ì‹œê°„ êµ¬ë… ì„¤ì •
    const subscription = supabase
      .channel('projects-channel')
      .on('postgres_changes', 
        { event: '*', schema: 'public', table: 'projects' },
        (payload) => {
          console.log('Project change detected:', payload);
          handleProjectChange(payload);
        }
      )
      .on('postgres_changes',
        { event: '*', schema: 'public', table: 'project_stages' },
        (payload) => {
          console.log('Stage change detected:', payload);
          handleStageChange(payload);
        }
      )
      .subscribe();

    return () => {
      subscription.unsubscribe();
    };
  }, []);

  const handleProjectChange = useCallback((payload: any) => {
    switch (payload.eventType) {
      case 'INSERT':
        setProjects(prev => [payload.new, ...prev]);
        break;
      case 'UPDATE':
        setProjects(prev => prev.map(p => 
          p.id === payload.new.id ? { ...p, ...payload.new } : p
        ));
        break;
      case 'DELETE':
        setProjects(prev => prev.filter(p => p.id !== payload.old.id));
        break;
    }
  }, []);

  const handleStageChange = useCallback((payload: any) => {
    if (payload.eventType === 'UPDATE') {
      setProjects(prev => prev.map(project => {
        if (project.id === payload.new.project_id) {
          return {
            ...project,
            [`stage${payload.new.stage_number}`]: payload.new.stage_data
          };
        }
        return project;
      }));
    }
  }, []);

  return projects;
};
```

#### ì‹¤ì‹œê°„ ì˜ê²¬ ì‹œìŠ¤í…œ
```typescript
export const useRealtimeOpinions = (projectId: string) => {
  const [opinions, setOpinions] = useState<Opinion[]>([]);

  useEffect(() => {
    if (!projectId) return;

    // ì´ˆê¸° ì˜ê²¬ ë¡œë“œ
    const fetchOpinions = async () => {
      const { data } = await supabase
        .from('opinions')
        .select(`
          *,
          profiles:author_id(name, avatar_url),
          replies:opinions!parent_id(*)
        `)
        .eq('project_id', projectId)
        .is('parent_id', null)
        .order('created_at', { ascending: false });

      setOpinions(data || []);
    };

    fetchOpinions();

    // ì‹¤ì‹œê°„ ì˜ê²¬ êµ¬ë…
    const subscription = supabase
      .channel(`opinions:${projectId}`)
      .on('postgres_changes',
        { 
          event: '*', 
          schema: 'public', 
          table: 'opinions',
          filter: `project_id=eq.${projectId}`
        },
        (payload) => {
          handleOpinionChange(payload);
        }
      )
      .subscribe();

    return () => {
      subscription.unsubscribe();
    };
  }, [projectId]);

  const handleOpinionChange = useCallback((payload: any) => {
    switch (payload.eventType) {
      case 'INSERT':
        if (!payload.new.parent_id) {
          // ìƒˆë¡œìš´ ì˜ê²¬
          setOpinions(prev => [payload.new, ...prev]);
        } else {
          // ë‹µê¸€
          setOpinions(prev => prev.map(opinion => {
            if (opinion.id === payload.new.parent_id) {
              return {
                ...opinion,
                replies: [...(opinion.replies || []), payload.new]
              };
            }
            return opinion;
          }));
        }
        break;
      case 'UPDATE':
        setOpinions(prev => prev.map(opinion =>
          opinion.id === payload.new.id ? payload.new : opinion
        ));
        break;
      case 'DELETE':
        setOpinions(prev => prev.filter(opinion => opinion.id !== payload.old.id));
        break;
    }
  }, []);

  return opinions;
};
```

#### ì˜¨ë¼ì¸ ì‚¬ìš©ì ì¶”ì 
```typescript
export const useOnlineUsers = (projectId?: string) => {
  const [onlineUsers, setOnlineUsers] = useState<OnlineUser[]>([]);
  const { user } = useAuth();

  useEffect(() => {
    if (!user) return;

    const channel = supabase.channel('online-users');
    
    // í˜„ì¬ ì‚¬ìš©ì ì˜¨ë¼ì¸ ìƒíƒœ ì„¤ì •
    channel
      .on('presence', { event: 'sync' }, () => {
        const state = channel.presenceState();
        const users = Object.values(state).flat() as OnlineUser[];
        setOnlineUsers(users);
      })
      .on('presence', { event: 'join' }, ({ key, newPresences }) => {
        console.log('User joined:', newPresences);
      })
      .on('presence', { event: 'leave' }, ({ key, leftPresences }) => {
        console.log('User left:', leftPresences);
      })
      .subscribe(async (status) => {
        if (status === 'SUBSCRIBED') {
          // ìì‹ ì˜ ì˜¨ë¼ì¸ ìƒíƒœ ë“±ë¡
          await channel.track({
            user_id: user.id,
            name: user.user_metadata?.name || user.email,
            project_id: projectId,
            online_at: new Date().toISOString()
          });
        }
      });

    return () => {
      channel.unsubscribe();
    };
  }, [user, projectId]);

  return onlineUsers;
};
```

### ë™ì‹œ í¸ì§‘ ì¶©ëŒ ë°©ì§€

```typescript
export const useCollaborativeEditing = (projectId: string, stageNumber: number) => {
  const [isEditing, setIsEditing] = useState(false);
  const [editingUsers, setEditingUsers] = useState<EditingUser[]>([]);
  const { user } = useAuth();

  useEffect(() => {
    const channel = supabase.channel(`editing:${projectId}:${stageNumber}`);

    channel
      .on('broadcast', { event: 'editing-started' }, (payload) => {
        setEditingUsers(prev => {
          const existing = prev.find(u => u.userId === payload.userId);
          if (!existing) {
            return [...prev, {
              userId: payload.userId,
              userName: payload.userName,
              field: payload.field,
              startedAt: payload.startedAt
            }];
          }
          return prev;
        });
      })
      .on('broadcast', { event: 'editing-stopped' }, (payload) => {
        setEditingUsers(prev => prev.filter(u => u.userId !== payload.userId));
      })
      .subscribe();

    return () => {
      if (isEditing) {
        // í¸ì§‘ ì¤‘ë‹¨ ì‹ í˜¸ ì „ì†¡
        channel.send({
          type: 'broadcast',
          event: 'editing-stopped',
          payload: { userId: user?.id }
        });
      }
      channel.unsubscribe();
    };
  }, [projectId, stageNumber, user]);

  const startEditing = useCallback((fieldKey: string) => {
    if (!user) return;

    setIsEditing(true);
    
    const channel = supabase.channel(`editing:${projectId}:${stageNumber}`);
    channel.send({
      type: 'broadcast',
      event: 'editing-started',
      payload: {
        userId: user.id,
        userName: user.user_metadata?.name || user.email,
        field: fieldKey,
        startedAt: new Date().toISOString()
      }
    });
  }, [user, projectId, stageNumber]);

  const stopEditing = useCallback(() => {
    if (!user) return;

    setIsEditing(false);
    
    const channel = supabase.channel(`editing:${projectId}:${stageNumber}`);
    channel.send({
      type: 'broadcast',
      event: 'editing-stopped',
      payload: { userId: user.id }
    });
  }, [user, projectId, stageNumber]);

  return {
    isEditing,
    editingUsers,
    startEditing,
    stopEditing
  };
};
```

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **React 18.2.0**: ìµœì‹  React (Concurrent Features í¬í•¨)
- **TypeScript 5.0+**: íƒ€ì… ì•ˆì „ì„± ë° ê°œë°œì ê²½í—˜ í–¥ìƒ
- **Vite**: ë¹ ë¥¸ ê°œë°œ ì„œë²„ ë° ë¹Œë“œ ë„êµ¬
- **React Router v6**: ì„ ì–¸ì  ë¼ìš°íŒ…
- **React Query (TanStack Query)**: ì„œë²„ ìƒíƒœ ê´€ë¦¬
- **Zustand**: ê²½ëŸ‰ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ê´€ë¦¬
- **Tailwind CSS**: ìœ í‹¸ë¦¬í‹° í¼ìŠ¤íŠ¸ CSS í”„ë ˆì„ì›Œí¬
- **HeadlessUI + Radix UI**: ì ‘ê·¼ì„±ì´ ì¢‹ì€ UI ì»´í¬ë„ŒíŠ¸
- **React Hook Form**: ì„±ëŠ¥ ì¢‹ì€ í¼ ê´€ë¦¬
- **Zod**: ìŠ¤í‚¤ë§ˆ ê²€ì¦

### Backend (Supabase)
- **PostgreSQL**: ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤
- **Supabase Auth**: ì¸ì¦ ë° ì„¸ì…˜ ê´€ë¦¬
- **Row Level Security (RLS)**: ë°ì´í„° ë³´ì•ˆ
- **Realtime**: WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
- **Storage**: íŒŒì¼ ì—…ë¡œë“œ ë° ê´€ë¦¬
- **Edge Functions**: ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜ (í•„ìš”ì‹œ)

### ê°œë°œ ë„êµ¬
- **ESLint + Prettier**: ì½”ë“œ í’ˆì§ˆ ë° í¬ë§¤íŒ…
- **Husky + lint-staged**: Git í›… ê´€ë¦¬
- **Commitlint**: ì»¤ë°‹ ë©”ì‹œì§€ ê·œì¹™
- **Jest + React Testing Library**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- **Cypress**: E2E í…ŒìŠ¤íŠ¸
- **Storybook**: ì»´í¬ë„ŒíŠ¸ ë¬¸ì„œí™”

### ë°°í¬ ë° ëª¨ë‹ˆí„°ë§
- **Vercel**: í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬
- **Supabase Cloud**: ë°±ì—”ë“œ í˜¸ìŠ¤íŒ…
- **Sentry**: ì—ëŸ¬ ëª¨ë‹ˆí„°ë§
- **Google Analytics**: ì‚¬ìš©ì ë¶„ì„

---

## ğŸ“‹ ê°œë°œ ê°€ì´ë“œë¼ì¸

### í”„ë¡œì íŠ¸ êµ¬ì¡°
```
src/
â”œâ”€â”€ components/           # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ ui/              # ê¸°ë³¸ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ forms/           # í¼ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ layout/          # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ project/         # í”„ë¡œì íŠ¸ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ hooks/               # ì»¤ìŠ¤í…€ í›…
â”‚   â”œâ”€â”€ api/            # API ê´€ë ¨ í›…
â”‚   â”œâ”€â”€ auth/           # ì¸ì¦ ê´€ë ¨ í›…
â”‚   â””â”€â”€ utils/          # ìœ í‹¸ë¦¬í‹° í›…
â”œâ”€â”€ lib/                 # ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì •
â”œâ”€â”€ pages/               # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ store/               # ìƒíƒœ ê´€ë¦¬ (Zustand)
â”œâ”€â”€ types/               # TypeScript íƒ€ì… ì •ì˜
â”œâ”€â”€ utils/               # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â””â”€â”€ styles/              # CSS ë° ìŠ¤íƒ€ì¼ íŒŒì¼
```

### ë„¤ì´ë° ì»¨ë²¤ì…˜

#### íŒŒì¼ëª…
- **ì»´í¬ë„ŒíŠ¸**: `PascalCase.tsx` (ì˜ˆ: `ProjectCard.tsx`)
- **í›…**: `camelCase.ts` (ì˜ˆ: `useAuth.ts`)
- **ìœ í‹¸ë¦¬í‹°**: `camelCase.ts` (ì˜ˆ: `dateUtils.ts`)
- **íƒ€ì…**: `camelCase.types.ts` (ì˜ˆ: `project.types.ts`)

#### ë³€ìˆ˜ëª…
- **ìƒìˆ˜**: `SCREAMING_SNAKE_CASE`
- **í•¨ìˆ˜**: `camelCase`
- **ì»´í¬ë„ŒíŠ¸**: `PascalCase`
- **íƒ€ì…/ì¸í„°í˜ì´ìŠ¤**: `PascalCase`

### ì½”ë”© ê·œì¹™

#### TypeScript
```typescript
// ì¸í„°í˜ì´ìŠ¤ ì •ì˜
interface ProjectCardProps {
  project: Project;
  onClick?: (project: Project) => void;
  className?: string;
}

// í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ (React.FC ì‚¬ìš©)
export const ProjectCard: React.FC<ProjectCardProps> = ({
  project,
  onClick,
  className = ''
}) => {
  // ì»´í¬ë„ŒíŠ¸ ë¡œì§
};

// ì»¤ìŠ¤í…€ í›…
export const useProjectData = (projectId: string) => {
  const [data, setData] = useState<Project | null>(null);
  const [loading, setLoading] = useState(true);
  
  // í›… ë¡œì§
  
  return { data, loading };
};
```

#### ìŠ¤íƒ€ì¼ë§
```typescript
// Tailwind CSS í´ë˜ìŠ¤ ì‚¬ìš©
const ProjectCard = () => (
  <div className="bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow">
    <h3 className="text-lg font-semibold text-gray-900 mb-2">
      {project.name}
    </h3>
  </div>
);

// ì¡°ê±´ë¶€ ìŠ¤íƒ€ì¼ë§
const buttonClass = cn(
  'px-4 py-2 rounded-md font-medium transition-colors',
  variant === 'primary' ? 'bg-blue-600 text-white hover:bg-blue-700' : 'bg-gray-100 text-gray-700 hover:bg-gray-200',
  disabled && 'opacity-50 cursor-not-allowed'
);
```

### API í˜¸ì¶œ íŒ¨í„´

#### React Query ì‚¬ìš©
```typescript
// API í•¨ìˆ˜ ì •ì˜
export const fetchProject = async (id: string): Promise<Project> => {
  const { data, error } = await supabase
    .from('projects')
    .select(`
      *,
      profiles:created_by(name),
      project_stages(*),
      opinions(count)
    `)
    .eq('id', id)
    .single();

  if (error) throw error;
  return data;
};

// í›…ì—ì„œ ì‚¬ìš©
export const useProject = (id: string) => {
  return useQuery({
    queryKey: ['project', id],
    queryFn: () => fetchProject(id),
    enabled: !!id
  });
};

// ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©
const ProjectDetail = ({ projectId }: { projectId: string }) => {
  const { data: project, isLoading, error } = useProject(projectId);
  
  if (isLoading) return <LoadingSpinner />;
  if (error) return <ErrorMessage error={error} />;
  if (!project) return <NotFound />;
  
  return <ProjectInfo project={project} />;
};
```

### ì—ëŸ¬ ì²˜ë¦¬

#### ì „ì—­ ì—ëŸ¬ ì²˜ë¦¬
```typescript
// components/ErrorBoundary.tsx
export class ErrorBoundary extends React.Component<
  { children: React.ReactNode },
  { hasError: boolean; error?: Error }
> {
  constructor(props: { children: React.ReactNode }) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error: Error) {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    console.error('ErrorBoundary caught an error:', error, errorInfo);
    
    // Sentry ë˜ëŠ” ë‹¤ë¥¸ ì—ëŸ¬ ë¦¬í¬íŒ… ì„œë¹„ìŠ¤ë¡œ ì „ì†¡
    // reportError(error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      return (
        <div className="min-h-screen flex items-center justify-center">
          <div className="text-center">
            <h2 className="text-xl font-semibold text-red-600 mb-2">
              ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤
            </h2>
            <p className="text-gray-600 mb-4">
              í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ ì£¼ì„¸ìš”
            </p>
            <button 
              onClick={() => window.location.reload()}
              className="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
            >
              ìƒˆë¡œê³ ì¹¨
            </button>
          </div>
        </div>
      );
    }

    return this.props.children;
  }
}
```

### í…ŒìŠ¤íŠ¸ ê°€ì´ë“œë¼ì¸

#### ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
```typescript
// ProjectCard.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { ProjectCard } from './ProjectCard';

const mockProject = {
  id: '1',
  name: 'Test Project',
  modelName: 'TEST-001',
  // ... ê¸°íƒ€ í•„ë“œë“¤
};

describe('ProjectCard', () => {
  it('í”„ë¡œì íŠ¸ ì´ë¦„ì„ í‘œì‹œí•œë‹¤', () => {
    render(<ProjectCard project={mockProject} />);
    expect(screen.getByText('Test Project')).toBeInTheDocument();
  });

  it('í´ë¦­ ì‹œ onView ì½œë°±ì„ í˜¸ì¶œí•œë‹¤', () => {
    const onView = jest.fn();
    render(<ProjectCard project={mockProject} onView={onView} />);
    
    fireEvent.click(screen.getByRole('button'));
    expect(onView).toHaveBeenCalledWith(mockProject);
  });
});
```

#### í›… í…ŒìŠ¤íŠ¸
```typescript
// useAuth.test.ts
import { renderHook, act } from '@testing-library/react';
import { useAuth } from './useAuth';

describe('useAuth', () => {
  it('ë¡œê·¸ì¸ ìƒíƒœë¥¼ ê´€ë¦¬í•œë‹¤', async () => {
    const { result } = renderHook(() => useAuth());
    
    expect(result.current.user).toBeNull();
    expect(result.current.loading).toBe(true);
    
    await act(async () => {
      await result.current.signIn('test@example.com', 'password');
    });
    
    expect(result.current.user).toBeTruthy();
  });
});
```

### Git ì›Œí¬í”Œë¡œìš°

#### ë¸Œëœì¹˜ ì „ëµ
```
main              # í”„ë¡œë•ì…˜ ë¸Œëœì¹˜
â”œâ”€â”€ develop       # ê°œë°œ ë¸Œëœì¹˜
â”œâ”€â”€ feature/*     # ê¸°ëŠ¥ ê°œë°œ ë¸Œëœì¹˜
â”œâ”€â”€ hotfix/*      # ê¸´ê¸‰ ìˆ˜ì • ë¸Œëœì¹˜
â””â”€â”€ release/*     # ë¦´ë¦¬ì¦ˆ ì¤€ë¹„ ë¸Œëœì¹˜
```

#### ì»¤ë°‹ ë©”ì‹œì§€ ê·œì¹™
```
feat: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
fix: ë²„ê·¸ ìˆ˜ì •
docs: ë¬¸ì„œ ìˆ˜ì •
style: ì½”ë“œ í¬ë§¤íŒ…, ì„¸ë¯¸ì½œë¡  ëˆ„ë½ ë“±
refactor: ì½”ë“œ ë¦¬íŒ©í† ë§
test: í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€/ìˆ˜ì •
chore: ë¹Œë“œ ê³¼ì • ë˜ëŠ” ë³´ì¡° ë„êµ¬ ë³€ê²½

ì˜ˆì‹œ:
feat: í”„ë¡œì íŠ¸ ì§„í–‰ë¥  ê³„ì‚° ë¡œì§ ì¶”ê°€
fix: ì˜ê²¬ ì‘ì„± ì‹œ íƒœê·¸ ì¤‘ë³µ ì œê±° ë²„ê·¸ ìˆ˜ì •
docs: API ë¬¸ì„œ ì—…ë°ì´íŠ¸
```

### ì„±ëŠ¥ ìµœì í™”

#### React ìµœì í™”
```typescript
// ë©”ëª¨ì´ì œì´ì…˜ í™œìš©
export const ProjectCard = React.memo<ProjectCardProps>(({ project, onView }) => {
  const progress = useMemo(() => calculateProgress(project), [project]);
  const handleClick = useCallback(() => onView?.(project), [onView, project]);
  
  return (
    <div onClick={handleClick}>
      {/* ì»´í¬ë„ŒíŠ¸ ë‚´ìš© */}
    </div>
  );
});

// ë¬´ê±°ìš´ ê³„ì‚°ì€ useMemoë¡œ ìµœì í™”
const Dashboard = () => {
  const { data: projects } = useProjects();
  
  const statistics = useMemo(() => {
    return {
      total: projects.length,
      completed: projects.filter(p => p.status === 'completed').length,
      avgProgress: projects.reduce((sum, p) => sum + p.progress, 0) / projects.length
    };
  }, [projects]);
  
  return <DashboardStats stats={statistics} />;
};
```

#### ì´ë¯¸ì§€ ìµœì í™”
```typescript
// ì§€ì—° ë¡œë”© ì´ë¯¸ì§€ ì»´í¬ë„ŒíŠ¸
export const LazyImage: React.FC<{
  src: string;
  alt: string;
  className?: string;
}> = ({ src, alt, className }) => {
  const [loaded, setLoaded] = useState(false);
  
  return (
    <div className={`relative ${className}`}>
      {!loaded && (
        <div className="absolute inset-0 bg-gray-200 animate-pulse rounded" />
      )}
      <img
        src={src}
        alt={alt}
        loading="lazy"
        onLoad={() => setLoaded(true)}
        className={`transition-opacity ${loaded ? 'opacity-100' : 'opacity-0'}`}
      />
    </div>
  );
};
```

---

## ğŸ“Š ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

### localStorageì—ì„œ Supabaseë¡œ ë°ì´í„° ì´ì „

#### 1. ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸
```typescript
// src/utils/dataMigration.ts
export const migrateLocalStorageToSupabase = async () => {
  try {
    // 1. localStorage ë°ì´í„° ì¶”ì¶œ
    const localProjects = JSON.parse(localStorage.getItem('projects') || '[]');
    const localUsers = JSON.parse(localStorage.getItem('users') || '[]');
    const localOpinions = JSON.parse(localStorage.getItem('opinions') || '[]');
    
    console.log('Migration started:', {
      projects: localProjects.length,
      users: localUsers.length,
      opinions: localOpinions.length
    });

    // 2. í”„ë¡œì íŠ¸ ë°ì´í„° ë³€í™˜ ë° ì´ì „
    for (const localProject of localProjects) {
      const migratedProject = await migrateProject(localProject);
      console.log('Project migrated:', migratedProject.name);
    }

    // 3. ì˜ê²¬ ë°ì´í„° ì´ì „
    for (const localOpinion of localOpinions) {
      const migratedOpinion = await migrateOpinion(localOpinion);
      console.log('Opinion migrated:', migratedOpinion.id);
    }

    console.log('Migration completed successfully');
    
    // 4. ë°±ì—… ë° localStorage ì •ë¦¬
    backupLocalStorage();
    // localStorage.clear(); // ì£¼ì˜: ë§ˆì´ê·¸ë ˆì´ì…˜ í™•ì¸ í›„ ìˆ˜í–‰
    
  } catch (error) {
    console.error('Migration failed:', error);
    throw error;
  }
};

const migrateProject = async (localProject: any) => {
  // í”„ë¡œì íŠ¸ ê¸°ë³¸ ì •ë³´
  const { data: project, error } = await supabase
    .from('projects')
    .insert({
      name: localProject.name,
      model_name: localProject.modelName || localProject.id,
      description: localProject.description || '',
      status: localProject.status || 'active',
      created_at: localProject.createdAt,
      updated_at: localProject.updatedAt,
      created_by: getCurrentUser().id // í˜„ì¬ ë¡œê·¸ì¸ ì‚¬ìš©ìë¡œ ì„¤ì •
    })
    .select()
    .single();

  if (error) throw error;

  // ê° ë‹¨ê³„ ë°ì´í„° ì´ì „
  for (let stageNum = 1; stageNum <= 3; stageNum++) {
    const stageData = localProject[`stage${stageNum}`];
    if (stageData) {
      await supabase
        .from('project_stages')
        .insert({
          project_id: project.id,
          stage_number: stageNum,
          stage_data: stageData,
          progress: calculateStageProgress(stageData, stageNum)
        });
    }
  }

  return project;
};

const migrateOpinion = async (localOpinion: any) => {
  // í”„ë¡œì íŠ¸ ID ë§¤í•‘ í•„ìš” (localStorage ID â†’ Supabase UUID)
  const projectId = await findSupabaseProjectId(localOpinion.projectId);
  
  const { data, error } = await supabase
    .from('opinions')
    .insert({
      project_id: projectId,
      title: localOpinion.title || '',
      content: localOpinion.message || localOpinion.content,
      category: localOpinion.category || 'general',
      priority: localOpinion.priority || 'medium',
      status: localOpinion.status || 'open',
      created_at: localOpinion.createdAt,
      author_id: getCurrentUser().id
    })
    .select()
    .single();

  if (error) throw error;
  return data;
};
```

#### 2. ë°±ì—… ì‹œìŠ¤í…œ
```typescript
// ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ ì „ì²´ localStorage ë°±ì—…
const backupLocalStorage = () => {
  const backup = {
    timestamp: new Date().toISOString(),
    data: {
      projects: localStorage.getItem('projects'),
      users: localStorage.getItem('users'),
      opinions: localStorage.getItem('opinions'),
      completedProjects: localStorage.getItem('completedProjects'),
      activityLogs: localStorage.getItem('activityLogs')
    }
  };
  
  // JSON íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œ
  const blob = new Blob([JSON.stringify(backup, null, 2)], {
    type: 'application/json'
  });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `localStorage-backup-${Date.now()}.json`;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
};
```

---

## ğŸš€ ë°°í¬ ë° ìš´ì˜

### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```env
# .env.local (ê°œë°œí™˜ê²½)
REACT_APP_SUPABASE_URL=your_supabase_url
REACT_APP_SUPABASE_ANON_KEY=your_supabase_anon_key
REACT_APP_NODE_ENV=development

# .env.production (í”„ë¡œë•ì…˜)
REACT_APP_SUPABASE_URL=your_production_supabase_url
REACT_APP_SUPABASE_ANON_KEY=your_production_supabase_anon_key
REACT_APP_NODE_ENV=production
```

### ë¹Œë“œ ë° ë°°í¬
```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev

# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build

# ë¹Œë“œ ë¯¸ë¦¬ë³´ê¸°
npm run preview

# íƒ€ì… ì²´í¬
npm run type-check

# ë¦°íŠ¸ ê²€ì‚¬
npm run lint

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test
```

---

## ğŸ“ ê²°ë¡ 

ì´ ë°±ì„œëŠ” **ì˜ê²¬ ë³´ë“œ ì‹œìŠ¤í…œ v1.3**ì˜ ì™„ì „í•œ ê°œë°œ ê°€ì´ë“œì…ë‹ˆë‹¤. 

### ì£¼ìš” íŠ¹ì§•
- âœ… **ì™„ì „í•œ Supabase í†µí•©**: localStorage ì˜ì¡´ì„± ì™„ì „ ì œê±°
- âœ… **ì‹¤ì‹œê°„ í˜‘ì—…**: ë‹¤ì¤‘ ì‚¬ìš©ì ë™ì‹œ ì‘ì—… ì§€ì›
- âœ… **í•œêµ­ ì œì¡°ì—… íŠ¹í™”**: ì‹¤ì œ ì—…ë¬´ í”„ë¡œì„¸ìŠ¤ ë°˜ì˜
- âœ… **ëª¨ë˜ ê¸°ìˆ  ìŠ¤íƒ**: React 18 + TypeScript + Tailwind
- âœ… **ê°•ë ¥í•œ ë³´ì•ˆ**: RLS ê¸°ë°˜ ë°ì´í„° ë³´í˜¸
- âœ… **í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜**: ëŒ€ê·œëª¨ íŒ€ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥

### ê°œë°œ ìˆœì„œ
1. **Supabase í”„ë¡œì íŠ¸ ì„¤ì •** ë° ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ êµ¬ì¶•
2. **ì¸ì¦ ì‹œìŠ¤í…œ** êµ¬í˜„ (Supabase Auth í†µí•©)
3. **í•µì‹¬ í˜ì´ì§€** ê°œë°œ (ëŒ€ì‹œë³´ë“œ, í”„ë¡œì íŠ¸ ê´€ë¦¬)
4. **ì‹¤ì‹œê°„ ê¸°ëŠ¥** êµ¬í˜„ (í˜‘ì—…, ì˜ê²¬ ì‹œìŠ¤í…œ)
5. **UI/UX ì™„ì„±** ë° ëª¨ë°”ì¼ ìµœì í™”
6. **í…ŒìŠ¤íŠ¸ ë° ìµœì í™”**
7. **ë°°í¬ ë° ëª¨ë‹ˆí„°ë§**

ì´ ë°±ì„œì˜ ëª¨ë“  ëª…ì„¸ë¥¼ ì •í™•íˆ ë”°ë¼ êµ¬í˜„í•˜ë©´, ê¸°ì¡´ localStorage ê¸°ë°˜ ì‹œìŠ¤í…œì˜ ëª¨ë“  í•œê³„ë¥¼ ê·¹ë³µí•˜ê³  ì‹¤ì œ ì—…ë¬´ í™˜ê²½ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ì™„ì „í•œ í˜‘ì—… ë„êµ¬ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

**ì‘ì„±ì¼**: 2024ë…„ 12ì›”  
**ë²„ì „**: v1.3  
**ì‘ì„±ì**: Claude Code Development Team